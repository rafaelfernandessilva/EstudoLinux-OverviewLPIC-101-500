101.1 Determine and configure hardware settings

Peso: 2

Nesse tópico as principais área de conhecimentos serão:
* Ativar e desativar perifericos integrados.
* Diferenciar os tipos de dispositivos de armazenamento em massa
* Utilitarios para listar informações de hardware(Ex:. lsusb, lspci, etc.)
* Utilitarios para dispositivos USB
* Conceitos de sysfs, udev e dbus. 

**/sys/**  = Contém informações sobre os dispositivos de hardware

**sysfs** = É a partição dinâmica que contém o filysistem do sys

**/proc/** = E um filesystem dinâmico, que contém varios arquivos/diretorios com informações dos dispositivos e do sistema. 

**/proc/ioports** = Lista alguns endereços de memória para comuniação da CPU com outros dispositivos de hardware. A saída vai trazer o endereço da memória e o que esta preenchido naquele endereço. 

***/proc/dma*** = Direct Memory Addressing é um meio que permite que os dispositivos utilizem diretamente a memória, sem utilizar cpu

**/proc/interrupts** = 

**/dev/** = Referencias as dispositivos de hardawre da maquina. Ex:/dev/sda esta referenciando a um hd. 

**udev** = É o udev que monta os dispositivos e que referencia eles no diretorio /dev. Ao ligar a maquina o udev monta os os dispositivos e os coloca no /dev


**lspci** = Listar os dispositivos que estão conectados no barramento pci

* lspci -s [id_dispositivo] -v = vai listar os detalhes do dispositivo conectado

**lsusb** = Lista os dispositivos que estão conectados no barramento usb
* lsusb -s bus_id:device_id -v = lista detalhes do dispositivo conectado. 

Ex:.

      root@therafs:~# lsusb

      Bus 001 Device 002: ID 80ee:0021 VirtualBox USB Tablet

      Bus 001 Device 001: ID 1d6b:0001 Linux Foundation 1.1 root hub

      root@therafs:~# lsusb -s 001:001 -v


**lsmod** = comando para listar os modulos carregados pelo sistema, nessa listagem vai conter nome do modulo, tamanho do modulo e quem esta usando. Lembrando que os alguns modulos podem  ter depenências, para serem caregados, sendo assim será utilizado por um ou mais. 

**modinfo** = E um comando para mostrar detalhes de um modulo Ex:

    * moninfo [nome_do_modulo] =  vai trazer toda a descrição do modulo, versão, licença, descrição autor, dependências e etc. 

    root@rafaelfernandes:~# modinfo psmouse
    filename:       /lib/modules/5.11.0-34-generic/kernel/drivers/input/mouse/psmouse.ko

    license:        GPL

    description:    PS/2 mouse driver

    author:         Vojtech Pavlik <vojtech@suse.cz>

    srcversion:     3E1D77E4FA6FC1DB0311312

    alias:          serio:ty05pr*id*ex*

    alias:          serio:ty01pr*id*ex*

    depends:

    retpoline:      Y

    intree:         Y

    name:           psmouse

    vermagic:       5.11.0-34-generic SMP mod_unload modversions

    sig_id:         PKCS#7

    signer:         Build time autogenerated kernel key

    sig_key:        4F:EF:CD:92:F0:C4:01:9A:D4:D2:53:B3:8A:43:77:A0:35:08:CE:81

    sig_hashalgo:   sha512


**rmmod** = Comando utilizado para remover o modulo desejado. 

Ex:. rmmod psmouse

**insmod** =  Comando utilizado para inserir um modulo, porém no insmod você tem que inserir o caminho completo do modulo no qual deseja inserir. 

Ex: insmod /lib/modules/5.11.0-34-generic/kernel/drivers/input/mouse/psmouse.ko

*Obs:. O insmod não carrega as dependências*.

**modprobe** = O comando mprobe é utilizado para inserir modulos, porém ele faz um mapeamento das dependências dos modulos, então ele sabe o que cada modulo precisa. Ou seja ele faz uma instalação "automazida" do modulo, visto que o mesmo carrega as dependências e ainda não precisa passar o caminho do modulo. 

Inserindo módulo psmouse

Ex:. modprobe psmouse

O comando modprob também pode ser utilizado para remover um modulo. 

Ex:. modprobe -r psmouse

**/lib/modprobe.d** = Diretorio no qual o sistema realiza algumas configurações do modulo, com determinados arquivos como por exemplo arquivos de blacklist, para impedir inicialização de determinados modulos. 

**/etc/modprobe.d** =  Diretorio no qual você pode fazer configurações personalizada do modprobe, como por exemplo impedir inicialização de determinados modulos. 